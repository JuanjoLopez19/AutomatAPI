<p-dialog
  header="{{ 'T_MESSAGE' | translate }}"
  [modal]="true"
  [(visible)]="show"
  [position]="'top'"
  [style]="{ width: '650px', height: '320px' }"
  [draggable]="false"
  [resizable]="false"
  [closable]="false"
  class="dialog"
  (onShow)="onShow()"
>
  <ng-template pTemplate="header">
    <div class="container">
      <div class="row w-100 border-bottom">
        <h1>{{ "T_ADD_ENDPOINT" | translate }}</h1>
      </div>
    </div>
  </ng-template>
  <ng-template pTemplate="content">
    <div class="row h-100">
      <div class="col-12">
        <form [formGroup]="addEndpointFormControl">
          <div class="row">
            <div class="col-6">
              <div class="row justify-content-end">
                <div class="row pt-4">
                  <span class="p-float-label">
                    <input
                      pInputText
                      id="endpoint_name"
                      formControlName="endpoint_name"
                      [readOnly]="editMode"
                    />
                    <label htmlFor="endpoint_name">{{
                      "T_ENDP_NAME" | translate
                    }}</label>
                  </span>
                </div>
                <div class="pb-2 row">
                  <small
                    id="endp-name-help"
                    class="p-error block"
                    *ngIf="addEndpointFormControl.get('endpoint_name').errors?.[ 'required' ] && addEndpointFormControl.get('endpoint_name').touched"
                    >{{ "errors.T_ENDP_NAME_REQ" | translate }}</small
                  >
                  <small
                    id="endp-name-help"
                    class="p-error block"
                    *ngIf="validName"
                    >{{ "errors.T_ENDP_NAME_INVALID" | translate }}</small
                  >
                  <small
                    id="endp-name-help"
                    class="p-error block"
                    *ngIf="duplicatedName"
                    >{{ "errors.T_ENDP_NAME_DUPL" | translate }}</small
                  >
                </div>
                <div class="row pt-3">
                  <span class="p-float-label">
                    <input
                      pInputText
                      id="endpoint_url"

                      formControlName="endpoint_url"
                    />
                    <label htmlFor="endpoint_url">{{
                      "T_ENDP_URL" | translate
                    }}</label>
                  </span>
                </div>
                <div class="pb-3 row">
                  <small
                    id="endp-name-help"
                    class="p-error block"
                    *ngIf="addEndpointFormControl.get('endpoint_url').errors?.[ 'required' ] && addEndpointFormControl.get('endpoint_url').touched"
                    >{{ "errors.T_ENDP_URL_REQ" | translate }}</small
                  >
                  <small
                    id="endp-name-help"
                    class="p-error block"
                    *ngIf="validUrl"
                    >{{ "errors.T_ENDP_URL_INVALID" | translate }}</small
                  >
                </div>
              </div>
            </div>
            <div class="col-6">
              <div class="row pt-4">
                <span class="p-float-label">
                  <textarea
                    pInputTextarea
                    id="endpoint_desc"
                    formControlName="endpoint_comment"
                  ></textarea>
                  <label htmlFor="endpoint_desc">{{
                    "T_ENDP_DESC" | translate
                  }}</label>
                </span>
              </div>
              <div class="row">
                <div class="py-3" formGroupName="methods">
                  <div class="row">
                    <div class="mb-3">
                      <p-checkbox
                        name="group"
                        [binary]="true"
                        formControlName="get_m"
                        inputId="get_m"
                        ngDefaultControl
                      ></p-checkbox>
                      <label for="get_m">
                        {{ "T_GET_METHOD" | translate }}</label
                      >

                      <p-checkbox
                        name="group"
                        [binary]="true"
                        formControlName="post"
                        inputId="post"
                        ngDefaultControl
                      ></p-checkbox>
                      <label for="post">
                        {{ "T_POST_METHOD" | translate }}</label
                      >
                    </div>
                    <div class="row">
                      <div class="mb-1">
                        <p-checkbox
                          name="group"
                          [binary]="true"
                          formControlName="put"
                          inputId="put"
                          ngDefaultControl
                        ></p-checkbox>
                        <label for="put">
                          {{ "T_PUT_METHOD" | translate }}</label
                        >

                        <p-checkbox
                          name="group"
                          [binary]="true"
                          formControlName="del"
                          inputId="del"
                          ngDefaultControl
                        ></p-checkbox>
                        <label for="del">
                          {{ "T_DEL_METHOD" | translate }}</label
                        >
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </ng-template>
  <ng-template pTemplate="footer">
    <div class="row w-100 justify-content-end">
      <div class="col-4">
         <small
            id="endp-name-help"
            class="p-error block"
            *ngIf="noMethodChecked"
            >{{ "errors.T_ENDP_METHOD_REQ" | translate }}</small
          >
      </div>
      <div class="col-4">
        <p-button
          [label]="'T_DISCARD' | translate"
          icon="pi pi-times"
          iconPos="right"
          (onClick)="manageHide()"
        ></p-button>
      </div>
      <div class="col-4">
        <p-button
          [label]="'T_ADD' | translate"
          icon="pi pi-check"
          iconPos="right"
          (onClick)="closeModal()"
        ></p-button>
      </div>
    </div>
  </ng-template>
</p-dialog>
